<?xml version="1.0" encoding="UTF-8"?>
<project name="locadora_veiculo-impl" default="default" basedir=".." xmlns:j2seproject1="http://www.netbeans.org/ns/j2se-project/1" xmlns:j2seproject3="http://www.netbeans.org/ns/j2se-project/3" xmlns:jaxrpc="http://www.netbeans.org/ns/j2se-project/jax-rpc">

    <import file="ant-deploy.xml"/>

    <target name="default" depends="jar" description="Build whole project."/>

    <!--
    =================
    INITIALIZATION
    =================
    -->
    <target name="-pre-init">
        <!-- Empty placeholder for easier customization. -->
    </target>

    <target name="-init-private" depends="-pre-init">
        <property file="nbproject/private/private.properties"/>
    </target>

    <target name="-init-user" depends="-pre-init,-init-private">
        <property file="${user.properties.file}"/>
    </target>

    <target name="-init-project" depends="-pre-init,-init-private,-init-user">
        <property file="nbproject/project.properties"/>
    </target>

    <target name="-init-check" depends="-pre-init,-init-private,-init-user,-init-project">
        <fail unless="src.dir">Must set src.dir</fail>
        <fail unless="build.dir">Must set build.dir</fail>
        <fail unless="dist.dir">Must set dist.dir</fail>
        <fail unless="build.classes.dir">Must set build.classes.dir</fail>
        <fail unless="dist.jar">Must set dist.jar</fail>
    </target>

    <target name="init" depends="-pre-init,-init-private,-init-user,-init-project,-init-check">
        <mkdir dir="${build.dir}"/>
        <mkdir dir="${build.classes.dir}"/>
        <mkdir dir="${dist.dir}"/>
    </target>

    <!--
    =================
    COMPILATION
    =================
    -->
    <target name="-pre-compile">
        <!-- Empty placeholder for easier customization. -->
    </target>

    <target name="compile" depends="init,-pre-compile" description="Compile project.">
        <javac srcdir="${src.dir}"
               destdir="${build.classes.dir}"
               debug="true"
               deprecation="${javac.deprecation}"
               includeantruntime="false"
               source="${javac.source}"
               target="${javac.target}"
               encoding="${source.encoding}">
            <classpath path="${javac.classpath}"/>
        </javac>
        <copy todir="${build.classes.dir}">
            <fileset dir="${src.dir}" excludes="${build.classes.excludes}"/>
        </copy>
    </target>

    <target name="-post-compile">
        <!-- Empty placeholder for easier customization. -->
    </target>

    <!--
    =================
    JAR BUILDING
    =================
    -->
    <target name="-pre-jar">
        <!-- Empty placeholder for easier customization. -->
    </target>

    <target name="jar" depends="init,compile,-pre-jar" description="Build JAR.">
        <jar jarfile="${dist.jar}"
             compress="${jar.compress}"
             manifest="${manifest.file}">
            <fileset dir="${build.classes.dir}"/>
        </jar>
    </target>

    <target name="-post-jar">
        <!-- Empty placeholder for easier customization. -->
    </target>

    <!--
    =================
    EXECUTION
    =================
    -->
    <target name="run" depends="jar" description="Run a main class.">
        <java fork="true" classname="${main.class}">
            <classpath>
                <path path="${run.classpath}"/>
            </classpath>
            <jvmarg line="${run.jvmargs}"/>
        </java>
    </target>

    <!--
    =================
    DEBUGGING
    =================
    -->
    <target name="debug" depends="jar" description="Debug project in IDE.">
        <java fork="true" classname="${main.class}">
            <classpath>
                <path path="${debug.classpath}"/>
            </classpath>
            <jvmarg line="${run.jvmargs}"/>
            <jvmarg value="-Xdebug"/>
            <jvmarg value="-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"/>
        </java>
    </target>

    <!--
    =================
    JAVADOC BUILDING
    =================
    -->
    <target name="javadoc" depends="init" description="Build Javadoc.">
        <mkdir dir="${dist.javadoc.dir}"/>
        <javadoc destdir="${dist.javadoc.dir}"
                 source="${javac.source}"
                 notree="${javadoc.notree}"
                 use="${javadoc.use}"
                 nonavbar="${javadoc.nonavbar}"
                 noindex="${javadoc.noindex}"
                 splitindex="${javadoc.splitindex}"
                 author="${javadoc.author}"
                 version="${javadoc.version}"
                 windowtitle="${javadoc.windowtitle}"
                 private="${javadoc.private}"
                 additionalparam="${javadoc.additionalparam}"
                 failonerror="false"
                 useexternalfile="true"
                 encoding="${source.encoding}">
            <classpath>
                <path path="${javac.classpath}"/>
            </classpath>
            <sourcepath>
                <pathelement location="${src.dir}"/>
            </sourcepath>
        </javadoc>
    </target>

    <!--
    =================
    CLEANUP
    =================
    -->
    <target name="clean" description="Clean build products.">
        <delete dir="${build.dir}"/>
        <delete dir="${dist.dir}"/>
    </target>

</project>
